import{j as e,a as x,b as m}from"./index-DkDPUQpr.js";import{d as h,k as b,L as d}from"./react-vendor-BToC6Ez8.js";import{f as o}from"./time-C9oM0N83.js";import"./originals-sdk-C0s467Ca.js";function g({did:r,didDocument:n}){const[a,l]=h.useState(!1);let t=null;if(n)try{t=JSON.parse(n)}catch{}return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>l(!a),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-green-100 text-green-800 rounded-full text-sm font-medium hover:bg-green-200 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),"Verified",e.jsx("svg",{className:`w-3 h-3 transition-transform ${a?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 p-4 z-10",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Verification Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Decentralized Identifier (DID)"}),e.jsx("code",{className:"block text-xs bg-gray-100 p-2 rounded break-all text-gray-700",children:r})]}),t&&Array.isArray(t.verificationMethod)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Verification Method"}),e.jsx("code",{className:"block text-xs bg-gray-100 p-2 rounded break-all text-gray-700",children:String(t.verificationMethod[0]?.id??"Unknown")})]}),e.jsx("div",{className:"pt-2 border-t border-gray-100",children:e.jsx("p",{className:"text-xs text-gray-600",children:"This list is published to a decentralized identifier (did:webvh). The DID document cryptographically proves the list's authenticity and ownership."})}),e.jsxs("div",{className:"pt-2 flex gap-2",children:[e.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(r)}catch{}},className:"flex-1 text-xs px-3 py-1.5 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Copy DID"}),t&&e.jsx("button",{onClick:()=>{const i=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),s=URL.createObjectURL(i),c=document.createElement("a");c.href=s,c.download="did-document.json",c.click(),URL.revokeObjectURL(s)},className:"flex-1 text-xs px-3 py-1.5 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Download Doc"})]})]})]})]})}function N(){const{did:r}=b(),n=r?`did:webvh:${decodeURIComponent(r)}`:null,a=x(m.publication.getPublicList,n?{webvhDid:n}:"skip");if(a===void 0)return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"container mx-auto p-4",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"space-y-3",children:[1,2,3].map(s=>e.jsx("div",{className:"h-12 bg-gray-200 rounded"},s))})]})})});if(!a)return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"container mx-auto p-4",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"List not found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"This list may have been unpublished or doesn't exist."}),e.jsx(d,{to:"/",className:"text-blue-600 hover:text-blue-700",children:"Go to home"})]})})});const{list:l,items:t,publication:i}=a;return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"container mx-auto p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{to:"/",className:"text-xl font-bold hover:text-gray-700",children:"Poo App"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Public List"})]})})}),e.jsxs("main",{className:"container mx-auto p-4",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Created by ",l.ownerName]})]}),e.jsx(g,{did:i.webvhDid,didDocument:i.didDocument})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow divide-y divide-gray-100",children:t.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"This list is empty."}):t.map(s=>e.jsxs("div",{className:"p-4 flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 pt-0.5",children:s.checked?e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 rounded"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-gray-900 ${s.checked?"line-through text-gray-500":""}`,children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Added by ",s.createdByName," ",o(s.createdAt),s.checked&&s.checkedAt&&e.jsxs(e.Fragment,{children:[" Â· Completed ",o(s.checkedAt)]})]})]})]},s._id))}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-100 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"About this list"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Published:"})," ",new Date(i.publishedAt).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Items:"})," ",t.length]}),e.jsxs("p",{className:"break-all",children:[e.jsx("span",{className:"font-medium",children:"DID:"})," ",e.jsx("span",{className:"font-mono text-xs",children:i.webvhDid})]})]})]}),e.jsxs("div",{className:"mt-6 text-center",children:[e.jsx("p",{className:"text-gray-600 mb-3",children:"Want to collaborate on shared lists?"}),e.jsx(d,{to:"/login",className:"inline-block px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700",children:"Sign up for Poo App"})]})]})]})}export{N as PublicList};
