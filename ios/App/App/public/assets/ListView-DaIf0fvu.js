const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ItemDetailsModal-VzX6nfN6.js","assets/index-DkDPUQpr.js","assets/react-vendor-BToC6Ez8.js","assets/originals-sdk-C0s467Ca.js","assets/index-CWPF-Ssf.css","assets/ProvenanceInfo-dVt13vnQ.js","assets/time-C9oM0N83.js","assets/DeleteListDialog-CKqY2zOG.js","assets/ShareModal-DIBpQGsP.js","assets/PublishModal-D2rlqMTw.js","assets/SaveAsTemplateModal-rFWrDzc_.js","assets/RenameListDialog-DJUj_p2S.js"])))=>i.map(i=>d[i]);
import{_ as K}from"./originals-sdk-C0s467Ca.js";import{u as ce,a as V,b as R,c as $,d as Me,e as qe,g as Je,q as de,j as e,f as G,I as Qe,C as ye,h as Xe,L as Ge,i as Ze,N as et}from"./index-DkDPUQpr.js";import{d as s,k as tt,f as rt,L as fe}from"./react-vendor-BToC6Ez8.js";import{f as De}from"./time-C9oM0N83.js";function Se(t){const{did:o,legacyDid:r}=ce(),n=V(R.collaborators.getListCollaborators,{listId:t}),l=V(R.collaborators.getUserRole,o?{listId:t,userDid:o,legacyDid:r??void 0}:"skip"),a=$(R.collaborators.updateCollaboratorRole),f=$(R.collaborators.removeCollaborator);return{collaborators:n,userRole:l,isLoading:n===void 0||l===void 0,updateRole:async(j,b)=>{if(!o)throw new Error("Not authenticated");await a({listId:t,collaboratorDid:j,newRole:b,requesterDid:o,legacyDid:r??void 0})},removeCollaborator:async j=>{if(!o)throw new Error("Not authenticated");await f({listId:t,collaboratorDid:j,requesterDid:o,legacyDid:r??void 0})},leaveList:async()=>{if(!o)throw new Error("Not authenticated");const j=n?.find(b=>b.userDid===o||b.userDid===r)?.userDid;if(!j)throw new Error("Not a collaborator on this list");await f({listId:t,collaboratorDid:j,requesterDid:o,legacyDid:r??void 0})}}}function at(t){const{isOnline:o}=Me(),r=V(R.items.getListItems,{listId:t}),[n,l]=s.useState([]),[a,f]=s.useState([]),v=s.useRef(void 0);r!==void 0&&(v.current=r),s.useEffect(()=>{if(r&&o){const i=r.map(u=>({_id:u._id,listId:u.listId,name:u.name,checked:u.checked,createdByDid:u.createdByDid,checkedByDid:u.checkedByDid,createdAt:u.createdAt,checkedAt:u.checkedAt,order:u.order,description:u.description,dueDate:u.dueDate,url:u.url,recurrence:u.recurrence}));qe(i)}},[r,o]),s.useEffect(()=>{r&&l(i=>{if(i.length===0)return i;const u=new Map(r.map(D=>[D._id,D])),w=i.filter(D=>{if(D._id.startsWith("temp-"))return!r.some(m=>m.name===D.name&&m.createdByDid===D.createdByDid&&Math.abs(m.createdAt-D.createdAt)<5e3);const I=u.get(D._id);return I!==void 0&&I.checked!==D.checked});return w.length===i.length?i:w})},[r]),s.useEffect(()=>{!o&&!r&&Je(t).then(f)},[o,r,t]);const L=!o&&!r&&a.length>0,M=$(R.items.addItem),j=$(R.items.checkItem),b=$(R.items.uncheckItem),C=$(R.items.reorderItems),p=s.useCallback(async i=>{const u=`temp-${Date.now()}`,D=(v.current??[]).reduce((m,h)=>Math.min(m,h.order??0),0),I={_id:u,_creationTime:Date.now(),listId:t,name:i.name,checked:!1,createdByDid:i.createdByDid,createdAt:i.createdAt,order:D-1,_isOptimistic:!0};if(l(m=>[I,...m]),o)try{await M({listId:t,...i})}catch(m){throw l(h=>h.filter(y=>y._id!==u)),m}else await de({type:"addItem",payload:{listId:t,...i},timestamp:Date.now(),retryCount:0})},[o,t,M]),N=s.useCallback(async(i,u,w)=>{const D=Date.now(),I=v.current??[];if(l(m=>{if(m.some(_=>_._id===i))return m.map(_=>_._id===i?{..._,checked:!0,checkedByDid:u,checkedAt:D,_isOptimistic:!0}:_);const y=[...I,...m].find(_=>_._id===i);return y?[...m,{...y,checked:!0,checkedByDid:u,checkedAt:D,_isOptimistic:!0}]:m}),o)try{await j({itemId:i,checkedByDid:u,legacyDid:w,checkedAt:D})}catch(m){throw l(h=>h.filter(y=>y._id!==i)),m}else await de({type:"checkItem",payload:{itemId:i,checkedByDid:u,legacyDid:w,checkedAt:D},timestamp:Date.now(),retryCount:0})},[o,j]),g=s.useCallback(async(i,u,w)=>{const D=v.current??[];if(l(I=>{if(I.some(y=>y._id===i))return I.map(y=>y._id===i?{...y,checked:!1,checkedByDid:void 0,checkedAt:void 0,_isOptimistic:!0}:y);const h=[...D,...I].find(y=>y._id===i);return h?[...I,{...h,checked:!1,checkedByDid:void 0,checkedAt:void 0,_isOptimistic:!0}]:I}),o)try{await b({itemId:i,userDid:u,legacyDid:w})}catch(I){throw l(m=>m.filter(h=>h._id!==i)),I}else await de({type:"uncheckItem",payload:{itemId:i,userDid:u,legacyDid:w},timestamp:Date.now(),retryCount:0})},[o,b]),k=s.useCallback(async(i,u,w)=>{o?await C({listId:t,itemIds:i,userDid:u,legacyDid:w}):await de({type:"reorderItem",payload:{listId:t,itemIds:i,userDid:u,legacyDid:w},timestamp:Date.now(),retryCount:0})},[o,t,C]);return{items:s.useMemo(()=>{const i=r??v.current??(!o&&a.length>0?a:void 0);if(!i)return n;const u=new Set(i.map(m=>m._id)),w=n.filter(m=>{if(!m._id.startsWith("temp-")){const y=i.find(_=>_._id===m._id);return y&&y.checked!==m.checked}return!i.some(y=>y.name===m.name&&y.createdByDid===m.createdByDid&&Math.abs(y.createdAt-m.createdAt)<5e3)}),D=i.map(m=>w.find(y=>y._id===m._id)??m),I=w.filter(m=>m._id.startsWith("temp-")||!u.has(m._id));return[...D,...I]},[r,n,o,a]),addItem:p,checkItem:N,uncheckItem:g,reorderItems:k,isLoading:r===void 0&&(!L||a.length===0),usingCache:L}}function st({onReorder:t,containerRef:o}){const[r,n]=s.useState({isDragging:!1,draggedId:null,dragOverId:null,touchY:0,startY:0,offsetY:0}),l=s.useRef(null),a=s.useRef(null),f=s.useCallback((M,j,b)=>{const C=M.touches[0],p=b.getBoundingClientRect();l.current=b,a.current=p,n({isDragging:!0,draggedId:j,dragOverId:null,touchY:C.clientY,startY:C.clientY,offsetY:C.clientY-p.top}),b.style.zIndex="1000",b.style.transition="none",b.style.opacity="0.9",b.style.boxShadow="0 4px 20px rgba(0,0,0,0.15)"},[]),v=s.useCallback(M=>{if(!r.isDragging||!r.draggedId||!o.current)return;const j=M.touches[0],b=o.current,C=Array.from(b.querySelectorAll("[data-item-id]"));let p=null;for(const N of C){const g=N.getBoundingClientRect();if(j.clientY>=g.top&&j.clientY<=g.bottom){const k=N.getAttribute("data-item-id");k&&k!==r.draggedId&&(p=k);break}}if(n(N=>({...N,touchY:j.clientY,dragOverId:p})),l.current&&a.current){const N=j.clientY-r.startY;l.current.style.transform=`translateY(${N}px)`}},[r.isDragging,r.draggedId,r.startY,o]),L=s.useCallback(()=>{r.draggedId&&r.dragOverId&&t(r.draggedId,r.dragOverId),l.current&&(l.current.style.zIndex="",l.current.style.transition="",l.current.style.opacity="",l.current.style.boxShadow="",l.current.style.transform=""),n({isDragging:!1,draggedId:null,dragOverId:null,touchY:0,startY:0,offsetY:0}),l.current=null,a.current=null},[r.draggedId,r.dragOverId,t]);return{state:r,handleTouchStart:f,handleTouchMove:v,handleTouchEnd:L}}function nt({enabled:t=!0,shortcuts:o}){const[r,n]=s.useState(!1),l=s.useCallback(a=>{if(!t)return;const f=a.target;if(f.tagName==="INPUT"||f.tagName==="TEXTAREA"||f.isContentEditable){a.key==="Escape"&&f.blur();return}if(a.key==="?"&&!a.ctrlKey&&!a.metaKey){a.preventDefault(),n(v=>!v);return}for(const v of o){const L=a.key.toLowerCase()===v.key.toLowerCase(),M=!!v.ctrl===(a.ctrlKey||a.metaKey),j=!!v.shift===a.shiftKey,b=!!v.alt===a.altKey;if(L&&M&&j&&b){a.preventDefault(),v.action();return}}},[t,o]);return s.useEffect(()=>(window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)),[l]),{showHelp:r,setShowHelp:n}}function ot(t){const o=[];t.ctrl&&o.push("âŒ˜/Ctrl"),t.shift&&o.push("â‡§"),t.alt&&o.push("âŒ¥/Alt");let r=t.key;return r===" "?r="Space":r==="ArrowUp"?r="â†‘":r==="ArrowDown"?r="â†“":r==="ArrowLeft"?r="â†":r==="ArrowRight"?r="â†’":r==="Escape"?r="Esc":r==="Enter"?r="â†µ":r=r.toUpperCase(),o.push(r),o.join(" + ")}function it({shortcuts:t,onClose:o}){return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:o,children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-md animate-slide-up overflow-hidden",onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[e.jsx("span",{children:"âŒ¨ï¸"})," Keyboard Shortcuts"]}),e.jsx("button",{onClick:o,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-5 space-y-2 max-h-96 overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Show this help"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded text-xs font-mono",children:"?"})]}),t.map((r,n)=>e.jsxs("div",{className:"flex justify-between items-center py-2 text-sm border-t border-gray-100 dark:border-gray-700",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:r.description}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded text-xs font-mono",children:ot(r)})]},n))]}),e.jsxs("div",{className:"px-5 py-3 bg-gray-50 dark:bg-gray-900 text-xs text-gray-500 dark:text-gray-400 text-center",children:["Press ",e.jsx("kbd",{className:"px-1 py-0.5 bg-gray-200 dark:bg-gray-700 rounded",children:"Esc"})," to close"]})]})})}function Ce(t){return t==="owner"||t==="editor"}function lt(t){return t==="owner"}function dt(t){return t==="owner"}function ct(t){return t==="owner"}function Ie(t){switch(t){case"owner":return"Owner";case"editor":return"Editor";case"viewer":return"Viewer"}}function Rt(t){switch(t){case"owner":return"Full control: can edit items, invite others, and delete the list";case"editor":return"Can add, check, and remove items";case"viewer":return"Read-only access to the list"}}const ut=s.forwardRef(function({onAddItem:o},r){const{did:n,legacyDid:l}=ce(),{haptic:a}=G(),f=s.useRef(null);s.useImperativeHandle(r,()=>f.current);const[v,L]=s.useState(""),[M,j]=s.useState(!1),b=async C=>{C.preventDefault();const p=v.trim();if(!(!p||!n)){a("medium"),j(!0);try{await o({name:p,createdByDid:n,legacyDid:l??void 0,createdAt:Date.now()}),L(""),a("success"),f.current?.focus()}catch(N){console.error("Failed to add item:",N),a("error")}finally{j(!1)}}};return e.jsxs("form",{onSubmit:b,className:"flex gap-3",children:[e.jsx("div",{className:"flex-1 relative",children:e.jsx("input",{ref:f,type:"text",value:v,onChange:C=>L(C.target.value),placeholder:"Add item...",className:"w-full px-4 py-3.5 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-amber-500 dark:focus:border-amber-500 focus:ring-4 focus:ring-amber-500/10 transition-all disabled:opacity-50",disabled:M})}),e.jsx("button",{type:"submit",disabled:M||!v.trim(),className:"px-6 py-3.5 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-400 hover:to-orange-400 text-white rounded-xl font-semibold shadow-lg shadow-amber-500/25 hover:shadow-xl hover:shadow-amber-500/30 focus:outline-none focus:ring-4 focus:ring-amber-500/30 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none transition-all active:scale-95",children:M?e.jsx("span",{className:"flex items-center gap-2",children:e.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add"]})})]})});function ht({item:t}){const o=[t.createdByDid];t.checkedByDid&&o.push(t.checkedByDid);const r=V(R.users.getUsersByDids,{dids:o});if(r===void 0)return e.jsx("span",{className:"text-xs text-gray-400",children:"Loading..."});if(t.checked&&t.checkedByDid&&t.checkedAt){const a=r[t.checkedByDid]?.displayName||"Unknown",f=De(t.checkedAt);return e.jsxs("span",{className:"text-xs text-gray-400",children:["Checked by ",a,", ",f]})}const n=r[t.createdByDid]?.displayName||"Unknown",l=De(t.createdAt);return e.jsxs("span",{className:"text-xs text-gray-400",children:["Added by ",n,", ",l]})}function _e(t){return typeof t=="string"&&t.startsWith("temp-")}function Bt({parentId:t,listId:o,userDid:r,legacyDid:n,canEdit:l}){const{haptic:a}=G(),[f,v]=s.useState(""),[L,M]=s.useState(!1),[j,b]=s.useState(!1),C=_e(t),p=V(R.items.getSubItems,C?"skip":{parentId:t})??[],N=$(R.items.addItem),g=$(R.items.checkItem),k=$(R.items.uncheckItem),S=$(R.items.removeItem),i=async h=>{if(h.preventDefault(),!(!f.trim()||!l||L)&&!C){a("medium"),M(!0);try{await N({listId:o,name:f.trim(),createdByDid:r,legacyDid:n,createdAt:Date.now(),parentId:t}),a("success"),v("")}catch(y){console.error("Failed to add sub-item:",y),a("error")}finally{M(!1)}}},u=async h=>{a(h.checked?"light":"success");try{h.checked?await k({itemId:h._id,userDid:r,legacyDid:n}):await g({itemId:h._id,checkedByDid:r,legacyDid:n,checkedAt:Date.now()})}catch(y){console.error("Failed to toggle sub-item:",y),a("error")}},w=async h=>{a("medium");try{await S({itemId:h,userDid:r,legacyDid:n})}catch(y){console.error("Failed to remove sub-item:",y),a("error")}},D=[...p].sort((h,y)=>{if(h.checked!==y.checked)return h.checked?1:-1;const _=h.order??h.createdAt,x=y.order??y.createdAt;return _-x}),I=p.filter(h=>h.checked).length,m=p.length;return e.jsxs("div",{className:"space-y-2",children:[m>0&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("div",{className:"flex-1 h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-emerald-600 rounded-full transition-all duration-300",style:{width:`${m>0?I/m*100:0}%`}})}),e.jsxs("span",{className:"flex-shrink-0",children:[I,"/",m]})]}),e.jsx("div",{className:"space-y-1",children:D.map(h=>e.jsxs("div",{className:`flex items-center gap-2 px-2 py-1.5 rounded-lg transition-colors ${h.checked?"bg-gray-50 dark:bg-gray-800/50":"bg-gray-50 dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[l?e.jsx("button",{onClick:()=>u(h),className:`flex-shrink-0 w-4 h-4 rounded flex items-center justify-center transition-all active:scale-90 ${h.checked?"bg-gradient-to-br from-green-500 to-emerald-600 text-white":"bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`,"aria-label":h.checked?"Uncheck sub-item":"Check sub-item",children:h.checked&&e.jsx("svg",{className:"w-2.5 h-2.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}):e.jsx("div",{className:`flex-shrink-0 w-4 h-4 rounded flex items-center justify-center ${h.checked?"bg-gradient-to-br from-green-500 to-emerald-600 text-white":"bg-gray-100 dark:bg-gray-700"}`,children:h.checked&&e.jsx("svg",{className:"w-2.5 h-2.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("span",{className:`flex-1 text-xs transition-all ${h.checked?"line-through text-gray-400 dark:text-gray-500":"text-gray-700 dark:text-gray-300"}`,children:h.name}),l&&e.jsx("button",{onClick:()=>w(h._id),className:"flex-shrink-0 w-5 h-5 flex items-center justify-center text-gray-300 dark:text-gray-600 hover:text-red-500 dark:hover:text-red-400 rounded transition-colors","aria-label":"Remove sub-item",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},h._id))}),l&&e.jsx(e.Fragment,{children:j?e.jsxs("form",{onSubmit:i,className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:f,onChange:h=>v(h.target.value),placeholder:"Add sub-item...",autoFocus:!0,disabled:L,className:"flex-1 px-3 py-1.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-xs text-gray-900 dark:text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-amber-500 disabled:opacity-50",onBlur:()=>{f.trim()||setTimeout(()=>b(!1),200)}}),e.jsx("button",{type:"submit",disabled:L||!f.trim(),className:"flex-shrink-0 px-3 py-1.5 bg-amber-500 hover:bg-amber-600 text-white text-xs font-medium rounded-lg transition-colors disabled:opacity-50",children:L?"...":"Add"}),e.jsx("button",{type:"button",onClick:()=>{b(!1),v("")},className:"flex-shrink-0 px-2 py-1.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-xs transition-colors",children:"Cancel"})]}):e.jsxs("button",{onClick:()=>{a("light"),b(!0)},className:"flex items-center gap-1.5 px-2 py-1.5 text-xs text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add sub-item"]})}),!l&&m===0&&e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 italic",children:"No sub-items"})]})}function gt(t){const o=_e(t),r=V(R.items.getSubItems,o?"skip":{parentId:t});if(!r||r.length===0)return null;const n=r.filter(a=>a.checked).length,l=r.length;return{checked:n,total:l}}const mt=s.lazy(()=>K(()=>import("./ItemDetailsModal-VzX6nfN6.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(t=>({default:t.ItemDetailsModal})));function xt({item:t,userDid:o,legacyDid:r,canEdit:n=!0,isDragging:l=!1,isDragOver:a=!1,isFocused:f=!1,onDragStart:v,onDragOver:L,onDragEnd:M,onTouchStart:j,onCheck:b,onUncheck:C,isSelectMode:p=!1,isSelected:N=!1,onToggleSelect:g,onLongPress:k}){const{haptic:S}=G(),i=$(R.items.checkItem),u=$(R.items.uncheckItem),w=$(R.items.removeItem),[D,I]=s.useState(!1),[m,h]=s.useState(!1),y=s.useRef(null),_=s.useRef(null),x=gt(t._id),H=()=>{!n||p||(_.current=setTimeout(()=>{k?.()},500))},W=()=>{_.current&&(clearTimeout(_.current),_.current=null)},q=()=>{_.current&&(clearTimeout(_.current),_.current=null)},J=t.dueDate?new Date(t.dueDate).toLocaleDateString(void 0,{month:"short",day:"numeric"}):null,Q=t.dueDate&&!t.checked&&t.dueDate<Date.now(),B=async()=>{if(!D){S(t.checked?"light":"success"),I(!0);try{t.checked?C?await C(t._id,o,r):await u({itemId:t._id,userDid:o,legacyDid:r}):b?await b(t._id,o,r):await i({itemId:t._id,checkedByDid:o,legacyDid:r,checkedAt:Date.now()})}catch(E){console.error("Failed to toggle item:",E),S("error")}finally{I(!1)}}},P=async()=>{if(!D){S("medium"),I(!0);try{await w({itemId:t._id,userDid:o,legacyDid:r})}catch(E){console.error("Failed to remove item:",E),S("error"),I(!1)}}};return e.jsxs("div",{ref:y,draggable:n&&!p,onDragStart:E=>{!n||p||(E.dataTransfer.effectAllowed="move",v?.())},onDragOver:n&&!p?L:void 0,onDragEnd:n&&!p?M:void 0,onPointerDown:H,onPointerUp:W,onPointerLeave:q,onClick:p?g:void 0,className:`flex items-center gap-2 px-3 py-2.5 transition-all touch-manipulation ${l?"opacity-50 bg-gray-100 dark:bg-gray-700 scale-[1.02]":"hover:bg-gray-50 dark:hover:bg-gray-700/50"} ${a?"border-t-2 border-amber-500 -mt-0.5":""} ${t._isOptimistic?"opacity-60":""} ${t.checked?"bg-gray-50/50 dark:bg-gray-800/50":""} ${N?"bg-amber-50 dark:bg-amber-900/30 ring-2 ring-amber-400 dark:ring-amber-600":""} ${f&&!N?"bg-blue-50 dark:bg-blue-900/20 ring-2 ring-blue-400 dark:ring-blue-600":""} ${p?"cursor-pointer":""}`,children:[p&&n&&e.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded-lg flex items-center justify-center transition-all ${N?"bg-amber-500 text-white":"bg-gray-200 dark:bg-gray-600"}`,children:N&&e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),n&&!p&&e.jsx("div",{className:"flex-shrink-0 w-6 h-10 flex items-center justify-center text-gray-300 dark:text-gray-600 cursor-grab active:cursor-grabbing hover:text-gray-400 dark:hover:text-gray-500 transition-colors touch-none select-none","aria-label":"Drag to reorder",onTouchStart:E=>{y.current&&j&&j(E,t._id,y.current)},children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M7 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 2zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 14zm6-8a2 2 0 1 0-.001-4.001A2 2 0 0 0 13 6zm0 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 14z"})})}),!p&&(n?e.jsx("button",{onClick:E=>{E.stopPropagation(),B()},disabled:D,className:`flex-shrink-0 w-5 h-5 rounded-md flex items-center justify-center transition-all active:scale-90 ${t.checked?"bg-gradient-to-br from-green-500 to-emerald-600 text-white shadow-sm shadow-green-500/30":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600"} disabled:opacity-50`,"aria-label":t.checked?"Uncheck item":"Check item",children:t.checked?e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):e.jsx("div",{className:"w-2 h-2"})}):e.jsx("div",{className:`flex-shrink-0 w-5 h-5 rounded-md flex items-center justify-center ${t.checked?"bg-gradient-to-br from-green-500 to-emerald-600 text-white":"bg-gray-100 dark:bg-gray-700"}`,children:t.checked&&e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})),e.jsxs("div",{onClick:E=>{E.stopPropagation(),!p&&(S("light"),h(!0))},className:`flex-1 min-w-0 text-left rounded px-1 -mx-1 transition-colors ${p?"":"hover:bg-gray-50 dark:hover:bg-gray-700/30 cursor-pointer"}`,children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[t.priority&&!t.checked&&e.jsx("span",{className:`flex-shrink-0 w-2 h-2 rounded-full ${t.priority==="high"?"bg-red-500":t.priority==="medium"?"bg-yellow-500":"bg-blue-500"}`,title:`${t.priority} priority`}),e.jsx("p",{className:`text-xs text-gray-900 dark:text-gray-100 transition-all truncate ${t.checked?"line-through text-gray-400 dark:text-gray-500":""}`,children:t.name}),t.url&&e.jsx("span",{className:"text-blue-500 flex-shrink-0 inline-flex items-center text-xs leading-none",title:"Has link",children:"ðŸ”—"}),t.recurrence&&e.jsx("span",{className:"text-purple-500 flex-shrink-0 inline-flex items-center text-xs leading-none",title:`Repeats ${t.recurrence.frequency}`,children:"ðŸ”"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ht,{item:t}),e.jsx(Qe,{hasVC:!!t.createdByDid,did:t.createdByDid}),J&&e.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full flex-shrink-0 inline-flex items-center gap-0.5 ${Q?"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400":"bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400"}`,children:[e.jsx("span",{className:"leading-none",children:"ðŸ“…"})," ",J]}),t.description&&e.jsx("span",{className:"text-[10px] text-gray-400 flex-shrink-0 inline-flex items-center leading-none",title:"Has notes",children:"ðŸ“"}),t.attachments&&t.attachments.length>0&&e.jsxs("span",{className:"text-[10px] text-gray-400 flex-shrink-0 inline-flex items-center gap-0.5",title:`${t.attachments.length} attachment${t.attachments.length>1?"s":""}`,children:[e.jsx("span",{className:"leading-none",children:"ðŸ“Ž"})," ",t.attachments.length]}),x&&e.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full flex-shrink-0 inline-flex items-center gap-0.5 ${x.checked===x.total?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":"bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400"}`,title:`${x.checked} of ${x.total} sub-items done`,children:[e.jsx("span",{className:"leading-none",children:"ðŸ“¦"})," ",x.checked,"/",x.total]})]})]}),n&&!p&&e.jsx("button",{onClick:E=>{E.stopPropagation(),P()},disabled:D,className:"flex-shrink-0 w-8 h-8 flex items-center justify-center text-gray-300 dark:text-gray-600 hover:text-red-500 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg disabled:opacity-50 transition-all active:scale-90","aria-label":"Remove item",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),m&&e.jsx(s.Suspense,{fallback:null,children:e.jsx(mt,{item:t,userDid:o,legacyDid:r,canEdit:n,onClose:()=>h(!1)})})]})}function ft({listId:t,onLeave:o}){const{did:r,legacyDid:n}=ce(),{collaborators:l,userRole:a,isLoading:f,updateRole:v,removeCollaborator:L,leaveList:M}=Se(t),[j,b]=s.useState(null),[C,p]=s.useState(null),[N,g]=s.useState(null),[k,S]=s.useState(null),[i,u]=s.useState(!1),w=lt(a),D=async(x,H)=>{b(x.userDid),g(null);try{await v(x.userDid,H)}catch(W){console.error("Failed to change role:",W),g("Failed to change role")}finally{b(null)}},I=x=>{S(x)},m=async()=>{if(k){p(k.userDid),g(null);try{await L(k.userDid),S(null)}catch(x){throw console.error("Failed to remove collaborator:",x),g("Failed to remove collaborator"),x}finally{p(null)}}},h=()=>{u(!0)},y=async()=>{g(null);try{await M(),u(!1),o?.()}catch(x){throw console.error("Failed to leave list:",x),g("Failed to leave list"),x}};if(f)return e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading collaborators..."});if(!l||l.length===0)return e.jsx("div",{className:"p-4 text-center text-gray-500",children:"No collaborators"});const _=x=>x.userDid===r||x.userDid===n;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[N&&e.jsx("div",{className:"p-2 bg-red-50 text-red-600 text-sm rounded-md mb-2",children:N}),l.map(x=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-medium text-sm",children:x.displayName.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[x.displayName,_(x)&&e.jsx("span",{className:"ml-1 text-gray-500 text-sm",children:"(you)"})]}),x.email&&e.jsx("div",{className:"text-xs text-gray-500",children:x.email})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[x.role==="owner"?e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 text-xs font-medium rounded",children:Ie(x.role)}):w&&!_(x)?e.jsx(yt,{value:x.role,onChange:H=>D(x,H),disabled:j===x.userDid}):e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs font-medium rounded",children:Ie(x.role)}),w&&x.role!=="owner"&&!_(x)&&e.jsx("button",{onClick:()=>I(x),disabled:C===x.userDid,className:"p-1 text-gray-400 hover:text-red-500 transition-colors disabled:opacity-50",title:"Remove from list",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),_(x)&&x.role!=="owner"&&e.jsx("button",{onClick:h,className:"px-2 py-1 text-xs text-red-600 hover:text-red-700 font-medium",children:"Leave"})]})]},x._id))]}),k&&e.jsx(ye,{title:"Remove Collaborator",message:`Remove ${k.displayName} from this list? They will no longer have access.`,confirmLabel:C?"Removing...":"Remove",confirmVariant:"danger",onConfirm:m,onCancel:()=>S(null)}),i&&e.jsx(ye,{title:"Leave List",message:"Are you sure you want to leave this list? You will no longer have access unless invited again.",confirmLabel:"Leave",confirmVariant:"danger",onConfirm:y,onCancel:()=>u(!1)})]})}function yt({value:t,onChange:o,disabled:r}){return e.jsxs("select",{value:t,onChange:n=>o(n.target.value),disabled:r,className:"px-2 py-1 text-xs border border-gray-300 rounded bg-white text-gray-700 disabled:opacity-50",children:[e.jsx("option",{value:"editor",children:"Editor"}),e.jsx("option",{value:"viewer",children:"Viewer"})]})}const pt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],bt=["January","February","March","April","May","June","July","August","September","October","November","December"];function kt({listId:t,onItemClick:o}){const{haptic:r}=G(),[n,l]=s.useState(new Date),a=V(R.items.getListItems,{listId:t}),f=new Date(n.getFullYear(),n.getMonth(),1),v=new Date(n.getFullYear(),n.getMonth()+1,0,23,59,59),L=s.useMemo(()=>a?a.filter(g=>g.dueDate&&g.dueDate>=f.getTime()&&g.dueDate<=v.getTime()):[],[a,f.getTime(),v.getTime()]),M=s.useMemo(()=>{const g=new Map;for(const k of L){if(!k.dueDate)continue;const S=new Date(k.dueDate).toDateString(),i=g.get(S)??[];g.set(S,[...i,k])}return g},[L]),j=s.useMemo(()=>{const g=[],k=new Date(n.getFullYear(),n.getMonth(),1),S=new Date(n.getFullYear(),n.getMonth()+1,0);for(let i=0;i<k.getDay();i++)g.push(null);for(let i=1;i<=S.getDate();i++)g.push(new Date(n.getFullYear(),n.getMonth(),i));return g},[n]),b=()=>{r("light"),l(new Date(n.getFullYear(),n.getMonth()-1,1))},C=()=>{r("light"),l(new Date(n.getFullYear(),n.getMonth()+1,1))},p=()=>{r("light"),l(new Date)},N=g=>{const k=new Date;return g.toDateString()===k.toDateString()};return a?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:b,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:[bt[n.getMonth()]," ",n.getFullYear()]}),e.jsx("button",{onClick:p,className:"text-xs px-2 py-1 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded hover:bg-amber-200 dark:hover:bg-amber-900/50 transition-colors",children:"Today"})]}),e.jsx("button",{onClick:C,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsx("div",{className:"grid grid-cols-7 border-b border-gray-200 dark:border-gray-700",children:pt.map(g=>e.jsx("div",{className:"py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400",children:g},g))}),e.jsx("div",{className:"grid grid-cols-7",children:j.map((g,k)=>{if(!g)return e.jsx("div",{className:"h-24 border-b border-r border-gray-100 dark:border-gray-700"},`empty-${k}`);const S=M.get(g.toDateString())??[],i=N(g);return e.jsxs("div",{className:`min-h-24 p-1 border-b border-r border-gray-100 dark:border-gray-700 ${i?"bg-amber-50 dark:bg-amber-900/10":""}`,children:[e.jsx("div",{className:`text-xs font-medium mb-1 ${i?"text-amber-600 dark:text-amber-400":"text-gray-500 dark:text-gray-400"}`,children:g.getDate()}),e.jsxs("div",{className:"space-y-1",children:[S.slice(0,3).map(u=>e.jsx("button",{onClick:()=>{r("light"),o?.(u)},className:`w-full text-left text-[10px] px-1.5 py-0.5 rounded truncate transition-colors ${u.checked?"bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500 line-through":u.priority==="high"?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":u.priority==="medium"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400"}`,children:u.name},u._id)),S.length>3&&e.jsxs("div",{className:"text-[10px] text-gray-400 dark:text-gray-500 pl-1",children:["+",S.length-3," more"]})]})]},g.toISOString())})})]}):e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8 animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded mb-4"}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:Array.from({length:35}).map((g,k)=>e.jsx("div",{className:"h-20 bg-gray-100 dark:bg-gray-700 rounded"},k))})]})}function vt({selectedIds:t,onClearSelection:o,userDid:r,legacyDid:n}){const{haptic:l}=G(),[a,f]=s.useState(!1),[v,L]=s.useState(!1),M=$(R.items.batchCheckItems),j=$(R.items.batchUncheckItems),b=$(R.items.batchDeleteItems),C=t.size,p=async()=>{if(!a){l("medium"),f(!0);try{await M({itemIds:Array.from(t),checkedByDid:r,legacyDid:n}),l("success"),o()}catch(k){console.error("Failed to check items:",k),l("error")}finally{f(!1)}}},N=async()=>{if(!a){l("medium"),f(!0);try{await j({itemIds:Array.from(t),userDid:r,legacyDid:n}),l("success"),o()}catch(k){console.error("Failed to uncheck items:",k),l("error")}finally{f(!1)}}},g=async()=>{if(!a){l("medium"),f(!0);try{await b({itemIds:Array.from(t),userDid:r,legacyDid:n}),l("success"),o()}catch(k){console.error("Failed to delete items:",k),l("error")}finally{f(!1),L(!1)}}};return C===0?null:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-50 flex items-center gap-2 px-4 py-3 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 rounded-2xl shadow-2xl animate-slide-up",children:[e.jsxs("span",{className:"text-sm font-medium",children:[C," selected"]}),e.jsx("div",{className:"w-px h-6 bg-gray-700 dark:bg-gray-300"}),e.jsx("button",{onClick:p,disabled:a,className:"p-2 hover:bg-gray-700 dark:hover:bg-gray-300 rounded-lg transition-colors disabled:opacity-50",title:"Check all",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("button",{onClick:N,disabled:a,className:"p-2 hover:bg-gray-700 dark:hover:bg-gray-300 rounded-lg transition-colors disabled:opacity-50",title:"Uncheck all",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("button",{onClick:()=>{l("light"),L(!0)},disabled:a,className:"p-2 text-red-400 hover:bg-red-900/30 rounded-lg transition-colors disabled:opacity-50",title:"Delete all",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),e.jsx("div",{className:"w-px h-6 bg-gray-700 dark:bg-gray-300"}),e.jsx("button",{onClick:()=>{l("light"),o()},className:"p-2 hover:bg-gray-700 dark:hover:bg-gray-300 rounded-lg transition-colors",title:"Clear selection",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),v&&e.jsx(ye,{title:"Delete Items",message:`Are you sure you want to delete ${C} item${C>1?"s":""}? This cannot be undone.`,confirmLabel:"Delete",onConfirm:g,onCancel:()=>L(!1),confirmVariant:"danger"})]})}function jt({canShare:t,canPublish:o,canSaveTemplate:r,canDelete:n,canRename:l,isOnline:a,isPublished:f,onShare:v,onPublish:L,onSaveTemplate:M,onDelete:j,onRename:b,onKeyboardShortcuts:C,haptic:p}){const[N,g]=s.useState(!1),k=s.useRef(null),S=s.useRef(null);s.useEffect(()=>{function u(w){k.current&&!k.current.contains(w.target)&&S.current&&!S.current.contains(w.target)&&g(!1)}if(N)return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[N]),s.useEffect(()=>{function u(w){w.key==="Escape"&&g(!1)}if(N)return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[N]);const i=u=>{p("light"),u(),g(!1)};return e.jsxs("div",{className:"relative",children:[e.jsx("button",{ref:S,onClick:()=>{p("light"),g(!N)},className:"inline-flex items-center justify-center p-2 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-all active:scale-95","aria-label":"More actions","aria-expanded":N,"aria-haspopup":"true",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),N&&e.jsxs("div",{ref:k,className:"absolute right-0 top-full mt-2 w-56 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 py-2 z-50 animate-slide-up",children:[e.jsxs("button",{onClick:()=>i(C),className:"w-full px-4 py-2.5 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-3 transition-colors",children:[e.jsx("span",{className:"text-base leading-none",children:"âŒ¨ï¸"}),e.jsx("span",{children:"Keyboard shortcuts"}),e.jsx("span",{className:"ml-auto text-xs text-gray-400 dark:text-gray-500",children:"?"})]}),l&&e.jsxs("button",{onClick:()=>i(b),className:"w-full px-4 py-2.5 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-3 transition-colors",children:[e.jsx("span",{className:"text-base leading-none",children:"âœï¸"}),e.jsx("span",{children:"Rename list"})]}),e.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700 my-1"}),t&&e.jsxs("button",{onClick:()=>i(v),className:"w-full px-4 py-2.5 text-left text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-3 transition-colors",children:[e.jsx("span",{className:"text-base leading-none",children:"ðŸ”—"}),e.jsx("span",{children:"Share list"})]}),o&&e.jsxs("button",{onClick:()=>i(L),disabled:!a,className:`w-full px-4 py-2.5 text-left text-sm flex items-center gap-3 transition-colors ${a?"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700":"text-gray-400 dark:text-gray-500 cursor-not-allowed"}`,children:[e.jsx("span",{className:"text-base leading-none",children:"ðŸ“¡"}),e.jsx("span",{children:f?"Manage publication":"Publish list"}),!a&&e.jsx("span",{className:"ml-auto text-xs text-gray-400",children:"Offline"})]}),r&&e.jsxs("button",{onClick:()=>i(M),disabled:!a,className:`w-full px-4 py-2.5 text-left text-sm flex items-center gap-3 transition-colors ${a?"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700":"text-gray-400 dark:text-gray-500 cursor-not-allowed"}`,children:[e.jsx("svg",{className:"w-5 h-5 text-amber-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})}),e.jsx("span",{children:"Save as template"}),!a&&e.jsx("span",{className:"ml-auto text-xs text-gray-400",children:"Offline"})]}),n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700 my-1"}),e.jsxs("button",{onClick:()=>i(j),disabled:!a,className:`w-full px-4 py-2.5 text-left text-sm flex items-center gap-3 transition-colors ${a?"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20":"text-gray-400 dark:text-gray-500 cursor-not-allowed"}`,children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),e.jsx("span",{children:"Delete list"}),!a&&e.jsx("span",{className:"ml-auto text-xs text-gray-400",children:"Offline"})]})]})]})]})}const wt=s.lazy(()=>K(()=>import("./DeleteListDialog-CKqY2zOG.js"),__vite__mapDeps([7,1,2,3,4])).then(t=>({default:t.DeleteListDialog}))),Nt=s.lazy(()=>K(()=>import("./ShareModal-DIBpQGsP.js"),__vite__mapDeps([8,1,2,3,4,5,6])).then(t=>({default:t.ShareModal}))),Dt=s.lazy(()=>K(()=>import("./PublishModal-D2rlqMTw.js"),__vite__mapDeps([9,1,2,3,4])).then(t=>({default:t.PublishModal}))),Le=s.lazy(()=>K(()=>import("./ItemDetailsModal-VzX6nfN6.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(t=>({default:t.ItemDetailsModal}))),Ct=s.lazy(()=>K(()=>import("./SaveAsTemplateModal-rFWrDzc_.js"),__vite__mapDeps([10,1,2,3,4])).then(t=>({default:t.SaveAsTemplateModal}))),It=s.lazy(()=>K(()=>import("./RenameListDialog-DJUj_p2S.js"),__vite__mapDeps([11,1,2,3,4])).then(t=>({default:t.RenameListDialog})));function Lt(){const{id:t}=tt(),o=rt(),{did:r,legacyDid:n,isLoading:l}=ce(),{haptic:a}=G(),{scheduleItemsNotifications:f,isEnabled:v}=Xe({userDid:r}),[L,M]=s.useState(!1),[j,b]=s.useState(!1),[C,p]=s.useState(!1),[N,g]=s.useState(!1),[k,S]=s.useState(!1),[i,u]=s.useState(!1),[w,D]=s.useState(null),[I,m]=s.useState(null),[h,y]=s.useState("list"),[_,x]=s.useState(null),H=s.useRef(null),[W,q]=s.useState(!1),[J,Q]=s.useState(new Set),[B,P]=s.useState(null),[E,re]=s.useState(null),ue=s.useRef(null),U=t,z=V(R.lists.getList,{listId:U}),{items:T,addItem:Ae,checkItem:ae,uncheckItem:se,reorderItems:ne,isLoading:Re,usingCache:Be}=at(U),oe=$(R.items.removeItem),Te=s.useCallback(d=>{a("light"),Q(c=>{const O=new Set(c);return O.has(d)?O.delete(d):O.add(d),O.size===0&&q(!1),O})},[a]),Ee=s.useCallback(d=>{a("medium"),q(!0),Q(new Set([d]))},[a]),Oe=s.useCallback(()=>{a("light"),Q(new Set(T.map(d=>d._id)))},[T,a]),ie=s.useCallback(()=>{a("light"),Q(new Set),q(!1)},[a]),A=s.useMemo(()=>[...T].sort((d,c)=>{if(d.checked!==c.checked)return d.checked?1:-1;const O=d.order??d.createdAt,F=c.order??c.createdAt;return O-F}),[T]),he=s.useMemo(()=>E?T.find(d=>d._id===E)??null:null,[T,E]),pe=s.useMemo(()=>_?T.find(d=>d._id===_)??null:null,[T,_]),{userRole:Z,collaborators:$e,isLoading:ze}=Se(U),le=V(R.publication.getPublicationStatus,{listId:U}),{isOnline:Pe}=Me();s.useEffect(()=>{if(v&&T.length>0){const d=T.filter(c=>"dueDate"in c&&c.dueDate);d.length>0&&f(d)}},[T,v,f]);const Fe=s.useCallback(d=>{a("light"),D(d)},[a]),We=s.useCallback((d,c)=>{d.preventDefault(),w&&w!==c&&m(c)},[w]),Ye=s.useCallback(async()=>{if(!w||!I||T.length===0||!r){D(null),m(null);return}const d=T.map(F=>F._id),c=d.indexOf(w),O=d.indexOf(I);if(c!==-1&&O!==-1&&c!==O){a("medium");const F=[...d];F.splice(c,1),F.splice(O,0,w),await ne(F,r,n??void 0)}D(null),m(null)},[w,I,T,r,n,ne,a]),Ve=s.useCallback(async(d,c)=>{if(T.length===0||!r)return;const O=T.map(te=>te._id),F=O.indexOf(d),xe=O.indexOf(c);if(F!==-1&&xe!==-1&&F!==xe){a("medium");const te=[...O];te.splice(F,1),te.splice(xe,0,d),await ne(te,r,n??void 0)}},[T,r,n,ne,a]),ee=st({onReorder:Ve,containerRef:H}),be=s.useMemo(()=>{const d=Z?Ce(Z):!1;return[{key:"n",description:"New item (focus input)",action:()=>{d&&ue.current?.focus()}},{key:"/",description:"Focus add item input",action:()=>{d&&ue.current?.focus()}},{key:"j",description:"Move focus down",action:()=>{A.length!==0&&P(c=>c===null?0:Math.min(c+1,A.length-1))}},{key:"k",description:"Move focus up",action:()=>{A.length!==0&&P(c=>c===null?A.length-1:Math.max(c-1,0))}},{key:"ArrowDown",description:"Move focus down",action:()=>{A.length!==0&&P(c=>c===null?0:Math.min(c+1,A.length-1))}},{key:"ArrowUp",description:"Move focus up",action:()=>{A.length!==0&&P(c=>c===null?A.length-1:Math.max(c-1,0))}},{key:"x",description:"Toggle check on focused item",action:()=>{if(!d||B===null||!r)return;const c=A[B];c&&(c.checked?se(c._id,r,n??void 0):ae(c._id,r,n??void 0))}},{key:" ",description:"Toggle check on focused item",action:()=>{if(!d||B===null||!r)return;const c=A[B];c&&(c.checked?se(c._id,r,n??void 0):ae(c._id,r,n??void 0))}},{key:"e",description:"Edit focused item",action:()=>{if(B===null)return;const c=A[B];c&&re(c._id)}},{key:"Enter",description:"Edit focused item",action:()=>{if(B===null)return;const c=A[B];c&&re(c._id)}},{key:"d",description:"Delete focused item",action:()=>{if(!d||B===null||!r)return;const c=A[B];c&&(a("medium"),oe({itemId:c._id,userDid:r,legacyDid:n??void 0}),B>=A.length-1&&P(Math.max(0,A.length-2)))}},{key:"Delete",description:"Delete focused item",action:()=>{if(!d||B===null||!r)return;const c=A[B];c&&(a("medium"),oe({itemId:c._id,userDid:r,legacyDid:n??void 0}),B>=A.length-1&&P(Math.max(0,A.length-2)))}},{key:"Backspace",description:"Delete focused item",action:()=>{if(!d||B===null||!r)return;const c=A[B];c&&(a("medium"),oe({itemId:c._id,userDid:r,legacyDid:n??void 0}),B>=A.length-1&&P(Math.max(0,A.length-2)))}},{key:"Escape",description:"Clear focus / close modals",action:()=>{P(null),re(null),W&&ie()}}]},[A,B,r,n,Z,ae,se,oe,a,W,ie]),{showHelp:He,setShowHelp:ke}=nt({enabled:h==="list"&&!he,shortcuts:be});if(s.useEffect(()=>{B!==null&&B>=A.length&&P(A.length>0?A.length-1:null)},[A.length,B]),l||!r||z===void 0||Re||ze)return e.jsx(Ge,{});if(z===null)return e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ”"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"List not found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"This list may have been deleted or you don't have access."}),e.jsxs(fe,{to:"/app",className:"inline-flex items-center gap-2 px-6 py-3 bg-amber-500 hover:bg-amber-600 text-white rounded-xl font-semibold transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to lists"]})]});const Ue=Z!==null,ve=[r,n].filter(Boolean),Ke=ve.includes(z.ownerDid);if(!Ue&&!Ke)return e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ”’"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Access denied"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"You don't have permission to view this list."}),e.jsxs(fe,{to:"/app",className:"inline-flex items-center gap-2 px-6 py-3 bg-amber-500 hover:bg-amber-600 text-white rounded-xl font-semibold transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to lists"]})]});const ge=Z??(ve.includes(z.ownerDid)?"owner":"editor"),Y=Ce(ge),je=ct(ge),me=dt(ge),we=$e?.length??0,Ne=T.filter(d=>d.checked).length,X=T.length;return e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(fe,{to:"/app",onClick:()=>a("light"),className:"flex-shrink-0 w-10 h-10 flex items-center justify-center text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors","aria-label":"Back to lists",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100 line-clamp-2 sm:truncate",children:z.name}),e.jsx(Ze,{hasVC:!!z.assetDid,anchorStatus:le?.anchorStatus??"none",did:z.assetDid,anchorBlockHeight:le?.anchorBlockHeight,anchorTxId:le?.anchorTxId})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[X>0&&e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[Ne,"/",X," done"]}),we>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:"â€¢"}),e.jsxs("button",{onClick:()=>{a("light"),u(!i)},className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-all active:scale-95 text-xs sm:text-sm",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})}),we,e.jsx("svg",{className:`w-2.5 h-2.5 transition-transform ${i?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsxs("div",{className:"inline-flex items-center bg-gray-100 dark:bg-gray-800 rounded-full p-0.5",children:[e.jsx("button",{onClick:()=>{a("light"),y("list")},className:`p-1.5 sm:px-2.5 sm:py-1.5 rounded-full transition-all active:scale-95 ${h==="list"?"bg-white dark:bg-gray-600 text-amber-600 dark:text-amber-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,"aria-label":"List view",title:"List view",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})}),e.jsx("button",{onClick:()=>{a("light"),y("calendar")},className:`p-1.5 sm:px-2.5 sm:py-1.5 rounded-full transition-all active:scale-95 ${h==="calendar"?"bg-white dark:bg-gray-600 text-amber-600 dark:text-amber-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,"aria-label":"Calendar view",title:"Calendar view",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),je&&e.jsx("button",{onClick:()=>{a("light"),b(!0)},className:"inline-flex items-center justify-center p-2 rounded-full bg-gray-100 dark:bg-gray-800 text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/30 transition-all active:scale-95","aria-label":"Share",title:"Share list",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})}),e.jsx(jt,{canShare:je,canPublish:me,canSaveTemplate:Y,canDelete:me,canRename:me,isOnline:Pe,isPublished:le?.status==="active",onShare:()=>b(!0),onPublish:()=>p(!0),onSaveTemplate:()=>g(!0),onDelete:()=>M(!0),onRename:()=>S(!0),onKeyboardShortcuts:()=>ke(!0),haptic:a})]})]}),i&&e.jsxs("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-5 animate-slide-up",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ‘¥"})," Collaborators"]}),e.jsx(ft,{listId:U,onLeave:()=>o("/app")})]}),Be&&e.jsxs("div",{className:"mb-4 px-4 py-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl text-amber-700 dark:text-amber-400 text-sm flex items-center gap-3 animate-slide-up",children:[e.jsx("span",{className:"text-xl",children:"ðŸ“¡"}),e.jsx("span",{children:"Showing cached items. Some info may be outdated."})]}),X>0&&e.jsx("div",{className:"mb-4 bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-emerald-500 transition-all duration-500 ease-out",style:{width:`${Ne/X*100}%`}})}),W&&Y&&e.jsxs("div",{className:"mb-4 px-4 py-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl flex items-center justify-between animate-slide-up",children:[e.jsxs("span",{className:"text-sm font-medium text-amber-700 dark:text-amber-400",children:[J.size," of ",X," selected"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:Oe,className:"px-3 py-1.5 text-xs font-medium text-amber-700 dark:text-amber-400 hover:bg-amber-100 dark:hover:bg-amber-900/40 rounded-lg transition-colors",children:"Select all"}),e.jsx("button",{onClick:ie,className:"px-3 py-1.5 text-xs font-medium text-amber-700 dark:text-amber-400 hover:bg-amber-100 dark:hover:bg-amber-900/40 rounded-lg transition-colors",children:"Cancel"})]})]}),!W&&Y&&X>0&&e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsxs("button",{onClick:()=>{a("light"),q(!0)},className:"px-3 py-1.5 text-xs font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors flex items-center gap-1.5",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),"Select"]})}),Y&&e.jsx("div",{className:"mb-4 animate-slide-up",children:e.jsx(ut,{ref:ue,assetDid:z.assetDid,onAddItem:Ae})}),h==="list"&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden",children:A.length===0?e.jsx(et,{}):e.jsx("div",{ref:H,className:"divide-y divide-gray-100 dark:divide-gray-700",onTouchMove:ee.handleTouchMove,onTouchEnd:ee.handleTouchEnd,children:A.map((d,c)=>e.jsx("div",{"data-item-id":d._id,className:"animate-slide-up",style:{animationDelay:`${c*30}ms`},children:e.jsx(xt,{item:d,userDid:r,legacyDid:n??void 0,canEdit:Y,isDragging:w===d._id||ee.state.draggedId===d._id,isDragOver:I===d._id||ee.state.dragOverId===d._id,isFocused:B===c,onDragStart:()=>Fe(d._id),onDragOver:O=>We(O,d._id),onDragEnd:Ye,onTouchStart:ee.handleTouchStart,onCheck:ae,onUncheck:se,isSelectMode:W,isSelected:J.has(d._id),onToggleSelect:()=>Te(d._id),onLongPress:()=>Ee(d._id)})},d._id))})}),h==="calendar"&&e.jsx(kt,{listId:U,onItemClick:d=>{a("light"),x(d._id)}}),!Y&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-100 dark:bg-gray-800 rounded-xl text-center text-gray-500 dark:text-gray-400 text-sm flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"You have view-only access to this list."]}),e.jsxs(s.Suspense,{fallback:null,children:[L&&e.jsx(wt,{list:z,onClose:()=>M(!1),onDeleted:()=>o("/app")}),j&&e.jsx(Nt,{list:z,onClose:()=>b(!1)}),C&&e.jsx(Dt,{list:z,onClose:()=>p(!1)}),k&&e.jsx(It,{list:z,onClose:()=>S(!1)}),N&&e.jsx(Ct,{listId:U,listName:z.name,onClose:()=>g(!1)}),pe&&e.jsx(Le,{item:pe,userDid:r,legacyDid:n??void 0,canEdit:Y,onClose:()=>x(null)}),he&&e.jsx(Le,{item:he,userDid:r,legacyDid:n??void 0,canEdit:Y,onClose:()=>re(null)})]}),He&&e.jsx(it,{shortcuts:be.filter(d=>!["ArrowUp","ArrowDown"," ","Enter","Delete","Backspace"].includes(d.key)),onClose:()=>ke(!1)}),Y&&e.jsx(vt,{selectedIds:J,onClearSelection:ie,userDid:r,legacyDid:n??void 0})]})}const Tt=Object.freeze(Object.defineProperty({__proto__:null,ListView:Lt},Symbol.toStringTag,{value:"Module"}));export{Tt as L,Bt as S,Rt as g};
