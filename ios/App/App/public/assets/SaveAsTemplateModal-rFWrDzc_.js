import{u as L,f as M,c as T,b as F,j as e,n as D}from"./index-DkDPUQpr.js";import{d as s}from"./react-vendor-BToC6Ez8.js";import"./originals-sdk-C0s467Ca.js";function z({listId:p,listName:h,onClose:l,onSuccess:b}){const{did:n}=L(),{haptic:t}=M(),[i,y]=s.useState(`${h} Template`),[d,f]=s.useState(""),[c,k]=s.useState(!1),[a,m]=s.useState(!1),[x,o]=s.useState(null),[g,v]=s.useState(!1),j=T(F.templates.createFromList),N=async r=>{r.preventDefault();const u=i.trim();if(!u){o("Please enter a template name"),t("error");return}if(!n){o("No identity found"),t("error");return}o(null),m(!0),t("medium");try{await j({listId:p,templateName:u,description:d.trim()||void 0,isPublic:c,userDid:n}),t("success"),v(!0),setTimeout(()=>{b?.(),l()},1500)}catch(C){console.error("Failed to save template:",C),o("Failed to save template. Please try again."),t("error"),m(!1)}},w=e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl leading-none",children:"ðŸ“"}),e.jsxs("div",{children:[e.jsx("h2",{id:"save-template-title",className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:"Save as Template"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Reuse this list structure later"})]})]}),e.jsx("button",{onClick:()=>{t("light"),l()},className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"Close",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),S=g?void 0:e.jsxs("div",{className:"px-5 py-4 flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{t("light"),l()},disabled:a,className:"flex-1 px-4 py-3 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-xl font-medium hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",form:"save-template-form",disabled:a||!i.trim(),className:"flex-1 px-4 py-3 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-400 hover:to-orange-400 text-white rounded-xl font-semibold shadow-lg shadow-amber-500/25 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none transition-all",children:a?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Template"})]});return e.jsx(D,{isOpen:!0,onClose:l,header:w,footer:S,ariaLabelledBy:"save-template-title",children:g?e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex flex-col items-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Template Saved!"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"You can find it in Templates page"})]})}):e.jsxs("form",{id:"save-template-form",onSubmit:N,className:"p-5 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"templateName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Template name"}),e.jsx("input",{id:"templateName",type:"text",value:i,onChange:r=>y(r.target.value),placeholder:"e.g., Weekly Groceries Template",className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:border-amber-500 dark:focus:border-amber-500 focus:ring-4 focus:ring-amber-500/10 transition-all disabled:opacity-50",disabled:a,autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"templateDescription",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (optional)"}),e.jsx("textarea",{id:"templateDescription",value:d,onChange:r=>f(r.target.value),placeholder:"What is this template for?",rows:2,className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:border-amber-500 dark:focus:border-amber-500 focus:ring-4 focus:ring-amber-500/10 transition-all disabled:opacity-50 resize-none",disabled:a})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c,onChange:r=>k(r.target.checked),disabled:a,className:"w-5 h-5 rounded border-gray-300 dark:border-gray-600 text-amber-500 focus:ring-amber-500 dark:bg-gray-700"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Make public (others can use this template)"})]})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Only unchecked items will be included in the template."}),x&&e.jsxs("div",{className:"px-4 py-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl text-red-700 dark:text-red-400 text-sm flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),x]})]})})}export{z as SaveAsTemplateModal,z as default};
