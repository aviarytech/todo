import{u as T,f as L,a as y,b as n,c as o,j as e,B as C,l as D}from"./index-DkDPUQpr.js";import{f as U,d as I,L as _}from"./react-vendor-BToC6Ez8.js";import"./originals-sdk-C0s467Ca.js";function F(){const{did:t,isLoading:i}=T(),{haptic:a}=L(),l=U(),[d,c]=I.useState(null),x=y(n.templates.getUserTemplates,t?{userDid:t}:"skip")??[],g=y(n.templates.getPublicTemplates)??[],b=o(n.lists.createList),j=o(n.items.addItem),N=o(n.templates.deleteTemplate),v=o(n.templates.createListFromTemplate),f=async s=>{if(t){c(s.id),a("medium");try{const r=await D(s.name,t),u=await b({assetDid:r.assetDid,name:s.name,ownerDid:t,createdAt:Date.now()}),w=Date.now();for(const m of s.items)await j({listId:u,name:m.name,createdByDid:t,createdAt:w,priority:m.priority,description:m.description});a("success"),l(`/list/${u}`)}catch(r){console.error("Failed to create from template:",r),a("error"),c(null)}}},h=async s=>{if(t){c(s._id),a("medium");try{const r=await v({templateId:s._id,listName:s.name,userDid:t});a("success"),l(`/list/${r}`)}catch(r){console.error("Failed to create from saved template:",r),a("error"),c(null)}}},k=async s=>{if(t){a("medium");try{await N({templateId:s,userDid:t}),a("success")}catch(r){console.error("Failed to delete template:",r),a("error")}}};return i||!t?e.jsxs("div",{className:"max-w-3xl mx-auto animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/3"}),e.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded"})]}):e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(_,{to:"/app",className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“"})," Templates"]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Quick Start Templates"}),e.jsx("div",{className:"space-y-3",children:C.map(s=>e.jsx(B,{template:s,isCreating:d===s.id,onUse:()=>f(s)},s.id))})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"My Templates"}),x.length===0?e.jsxs("div",{className:"text-center py-8 bg-gray-50 dark:bg-gray-800/50 rounded-2xl",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"No templates yet"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Save a list as a template to reuse it later"})]}):e.jsx("div",{className:"space-y-3",children:x.map(s=>e.jsx(p,{template:s,isOwner:!0,isCreating:d===s._id,onUse:()=>h(s),onDelete:()=>k(s._id)},s._id))})]}),g.filter(s=>s.ownerDid!==t).length>0&&e.jsxs("section",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Public Templates"}),e.jsx("div",{className:"space-y-3",children:g.filter(s=>s.ownerDid!==t).map(s=>e.jsx(p,{template:s,isOwner:!1,isCreating:d===s._id,onUse:()=>h(s)},s._id))})]})]})}function B({template:t,isCreating:i,onUse:a}){return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:t.emoji}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:t.description}),e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:[t.items.length," item",t.items.length!==1?"s":""]})]})]}),e.jsx("button",{onClick:a,disabled:i,className:"px-3 py-1.5 text-sm bg-amber-500 hover:bg-amber-600 text-white rounded-lg transition-colors disabled:opacity-50",children:i?"Creating...":"Use"})]})})}function p({template:t,isOwner:i,isCreating:a,onUse:l,onDelete:d}){return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ“„"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100",children:t.name}),t.description&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:t.description}),e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:[t.items.length," item",t.items.length!==1?"s":"",t.isPublic&&" â€¢ Public"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:l,disabled:a,className:"px-3 py-1.5 text-sm bg-amber-500 hover:bg-amber-600 text-white rounded-lg transition-colors disabled:opacity-50",children:a?"Creating...":"Use"}),i&&d&&e.jsx("button",{onClick:d,className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})})}export{F as Templates,F as default};
