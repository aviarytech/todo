import{c as w,b as C,f as I,j as e,n as L}from"./index-DkDPUQpr.js";import{d as a}from"./react-vendor-BToC6Ez8.js";import{g as S}from"./ListView-DaIf0fvu.js";import{L as $}from"./ProvenanceInfo-dVt13vnQ.js";import"./originals-sdk-C0s467Ca.js";import"./time-C9oM0N83.js";function z({list:s,onClose:l}){const u=w(C.invites.createInvite),{haptic:d}=I(),[o,k]=a.useState("editor"),[i,c]=a.useState(null),[r,x]=a.useState(!1),[g,m]=a.useState(!1),[b,h]=a.useState(null),y=async t=>{x(!0),h(null),c(null);try{const n=crypto.randomUUID();await u({listId:s._id,token:n,role:t,createdAt:Date.now()});const N=`${window.location.origin}/join/${s._id}/${n}`;c(N)}catch(n){console.error("Failed to create invite:",n),h("Failed to create invite. Please try again.")}finally{x(!1)}};a.useEffect(()=>{y(o)},[]);const p=t=>{d("light"),k(t),y(t)},v=async()=>{if(i)try{await navigator.clipboard.writeText(i),d("success"),m(!0),setTimeout(()=>m(!1),2e3)}catch(t){console.error("Failed to copy:",t),d("error")}},j=e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h2",{id:"share-dialog-title",className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:"üîó Share List"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-[200px]",children:s.name})]}),e.jsx("button",{onClick:l,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"Close",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f=e.jsx("div",{className:"px-5 py-4",children:e.jsx("button",{onClick:l,className:"w-full px-4 py-3 bg-amber-500 hover:bg-amber-600 text-white rounded-xl font-semibold transition-colors",children:"Done"})});return e.jsx(L,{isOpen:!0,onClose:l,header:j,footer:f,ariaLabelledBy:"share-dialog-title",children:e.jsxs("div",{className:"p-5 space-y-5",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Send this link to invite someone to collaborate on your list."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Invite as"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>p("editor"),disabled:r,className:`flex-1 px-4 py-3 rounded-xl border-2 text-sm font-medium transition-all ${o==="editor"?"bg-amber-50 dark:bg-amber-900/20 border-amber-500 text-amber-700 dark:text-amber-400":"bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"} ${r?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("span",{className:"text-lg block mb-1",children:"‚úèÔ∏è"}),"Editor"]}),e.jsxs("button",{onClick:()=>p("viewer"),disabled:r,className:`flex-1 px-4 py-3 rounded-xl border-2 text-sm font-medium transition-all ${o==="viewer"?"bg-amber-50 dark:bg-amber-900/20 border-amber-500 text-amber-700 dark:text-amber-400":"bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"} ${r?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("span",{className:"text-lg block mb-1",children:"üëÅÔ∏è"}),"Viewer"]})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:S(o)})]}),r&&e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-xl text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500 dark:text-gray-400",children:[e.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating invite link..."]})}),b&&e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl text-red-700 dark:text-red-400 text-sm flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),b]}),i&&!r&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Invite link"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:i,readOnly:!0,className:"flex-1 px-4 py-3 text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm"}),e.jsx("button",{onClick:v,className:`px-4 py-3 rounded-xl font-medium transition-all ${g?"bg-green-500 text-white":"bg-amber-500 hover:bg-amber-600 text-white"}`,children:g?"‚úì":"Copy"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"This link expires in 24 hours and can only be used once."})]}),e.jsx($,{list:s})]})})}export{z as ShareModal};
