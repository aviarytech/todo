import{u as g,f as u,a as y,b as p,j as e,P as k,E as j,c as f}from"./index-DkDPUQpr.js";import{d as v,L as h}from"./react-vendor-BToC6Ez8.js";import"./originals-sdk-C0s467Ca.js";function b({itemData:a,userDid:d,legacyDid:m}){const{haptic:x}=u(),i=f(p.items.checkItem),{item:t,listName:n,listId:o}=a,c=async()=>{x("success"),await i({itemId:t._id,checkedByDid:d,legacyDid:m??void 0,checkedAt:Date.now()})},s=t.dueDate?new Date(t.dueDate).toLocaleDateString(void 0,{month:"short",day:"numeric"}):null,r=t.dueDate&&t.dueDate<Date.now();return e.jsxs("div",{className:"group flex items-start gap-3 p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-amber-300 dark:hover:border-amber-700 transition-all",children:[e.jsx("button",{onClick:c,className:"mt-0.5 w-5 h-5 rounded-md border-2 border-red-400 dark:border-red-500 hover:border-red-500 dark:hover:border-red-400 flex items-center justify-center transition-colors flex-shrink-0","aria-label":"Mark as complete",children:e.jsx("span",{className:"sr-only",children:"Complete"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-gray-900 dark:text-gray-100 font-medium truncate",children:t.name}),t.description&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-2 mt-1",children:t.description})]}),e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 flex-shrink-0",children:"ðŸ”¥ High"})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-sm",children:[e.jsxs(h,{to:`/list/${o}`,className:"inline-flex items-center gap-1 text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300 transition-colors",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("span",{className:"truncate max-w-32",children:n})]}),s&&e.jsxs("span",{className:`inline-flex items-center gap-1 ${r?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`,children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s]}),t.url&&e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-500 dark:text-blue-400 hover:text-blue-600 dark:hover:text-blue-300 transition-colors",onClick:l=>l.stopPropagation(),children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Link"]})]})]})]})}function N(){return e.jsx(j,{emoji:"ðŸŽ¯",title:"No high-priority items",description:"You don't have any high-priority items across your lists. When you mark items as high priority, they'll appear here for easy focus."})}function I(){const{did:a,legacyDid:d,isLoading:m}=g(),{haptic:x}=u(),i=y(p.items.getHighPriorityItems,a?{userDid:a,legacyDid:d??void 0}:"skip"),t=v.useMemo(()=>{if(!i)return null;const s=new Map;for(const r of i){if(!r.item)continue;const l=r.listId.toString();s.has(l)||s.set(l,{listName:r.listName,listId:r.listId,items:[]}),s.get(l).items.push(r)}return Array.from(s.values())},[i]);if(!a&&!m)return null;const n=i===void 0,o=t&&t.length>0,c=t?.reduce((s,r)=>s+r.items.length,0)??0;return e.jsxs("div",{className:"min-h-full",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{to:"/app",onClick:()=>x("light"),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"ðŸŽ¯ Priority Focus"})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:n?"Loading...":o?`${c} high-priority item${c===1?"":"s"} across your lists`:"Your high-priority items from all lists"})]})}),n&&e.jsx(k,{}),!n&&!o&&e.jsx("div",{className:"animate-slide-up",children:e.jsx(N,{})}),!n&&o&&a&&e.jsx("div",{className:"space-y-6 animate-slide-up",children:t.map(s=>e.jsxs("section",{children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“‹"}),e.jsx(h,{to:`/list/${s.listId}`,className:"hover:text-amber-600 dark:hover:text-amber-400 transition-colors",children:s.listName}),e.jsxs("span",{className:"text-gray-400 dark:text-gray-500 font-normal",children:["(",s.items.length,")"]})]})}),e.jsx("div",{className:"space-y-2",children:s.items.map(r=>e.jsx(b,{itemData:r,userDid:a,legacyDid:d??void 0},r.item._id))})]},s.listId))})]})}export{I as PriorityFocus};
