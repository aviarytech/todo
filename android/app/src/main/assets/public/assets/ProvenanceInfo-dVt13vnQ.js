import{f as j,a as u,b as g,j as e}from"./index-DkDPUQpr.js";import{d as k}from"./react-vendor-BToC6Ez8.js";function y(t,a=16,r=6){return t.length<=a+r+3?t:`${t.slice(0,a)}...${t.slice(-r)}`}function p(t){return new Date(t).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function b(t){const r=Date.now()-t,s=Math.floor(r/6e4),n=Math.floor(r/36e5),d=Math.floor(r/864e5);return s<1?"just now":s<60?`${s}m ago`:n<24?`${n}h ago`:d<7?`${d}d ago`:p(t)}async function B(t,a){try{return await navigator.clipboard.writeText(t),a("success"),!0}catch{return a("error"),!1}}function x({label:t,did:a,displayName:r,haptic:s}){const[n,d]=k.useState(!1),c=async()=>{await B(a,s)&&(d(!0),setTimeout(()=>d(!1),2e3))};return e.jsxs("div",{className:"flex items-start justify-between gap-2 py-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-0.5",children:t}),e.jsxs("div",{className:"flex items-center gap-2",children:[r&&e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-200 font-medium",children:r}),e.jsx("code",{className:"text-xs text-gray-600 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded font-mono break-all",children:y(a)})]})]}),e.jsx("button",{onClick:c,className:`flex-shrink-0 p-1.5 rounded transition-colors ${n?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}`,title:n?"Copied!":"Copy full DID",children:n?e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})}function h({label:t,timestamp:a}){return e.jsxs("div",{className:"py-2",children:[e.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-0.5",children:t}),e.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-200",children:p(a)})]})}function v({title:t,children:a,defaultOpen:r=!1}){const[s,n]=k.useState(r);return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>n(!s),className:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-amber-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:t})]}),e.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform ${s?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s&&e.jsx("div",{className:"px-4 py-2 divide-y divide-gray-100 dark:divide-gray-700/50",children:a})]})}function C({status:t}){const r={pending:{bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-700 dark:text-yellow-400",icon:"â³",label:"Pending"},inscribed:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-700 dark:text-blue-400",icon:"ðŸ“",label:"Inscribed"},failed:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-700 dark:text-red-400",icon:"âŒ",label:"Failed"},confirmed:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-700 dark:text-green-400",icon:"âœ…",label:"Confirmed"}}[t];return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${r.bg} ${r.text}`,children:[e.jsx("span",{children:r.icon}),e.jsx("span",{children:r.label})]})}function N({anchor:t}){const a=t.txid?`https://mempool.space/tx/${t.txid}`:null;return e.jsxs("div",{className:"py-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"â‚¿ Bitcoin Anchor"}),e.jsx(C,{status:t.status})]}),t.txid&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-0.5",children:"Transaction ID"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"text-xs text-gray-600 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded font-mono",children:y(t.txid,12,8)}),a&&e.jsxs("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-amber-600 dark:text-amber-400 hover:underline flex items-center gap-1",children:["View on Mempool",e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})]}),t.blockHeight&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-0.5",children:"Block Height"}),e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-200",children:["#",t.blockHeight.toLocaleString(),t.confirmations!==void 0&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:["(",t.confirmations," confirmations)"]})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Requested ",b(t.createdAt),t.confirmedAt&&e.jsxs("span",{children:[" â€¢ Confirmed ",b(t.confirmedAt)]})]})]})}function D({label:t,issuer:a,issuanceDate:r,displayName:s,haptic:n}){return e.jsxs("div",{className:"py-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("svg",{className:"w-4 h-4 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-200",children:t})]}),e.jsx(x,{label:"Issued by",did:a,displayName:s,haptic:n}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Issued ",p(r)]})]})}function w({events:t}){const a=[...t].sort((s,n)=>s.timestamp-n.timestamp),r={created:"ðŸ†•",vc_issued:"ðŸ“œ",anchored:"âš“",confirmed:"âœ…",completed:"â˜‘ï¸"};return e.jsxs("div",{className:"py-3",children:[e.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-3",children:"ðŸ“… Provenance Timeline"}),e.jsx("div",{className:"space-y-3",children:a.map((s,n)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center bg-gray-100 dark:bg-gray-800 rounded-full text-sm",children:r[s.type]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-200",children:[s.label,s.actor&&e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[" by ",e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-300",children:s.actorName||y(s.actor)})]})]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:p(s.timestamp)})]})]},n))})]})}function I({list:t}){const{haptic:a}=j(),r=u(g.users.getUsersByDids,{dids:[t.ownerDid]}),s=u(g.bitcoinAnchors.getListAnchors,{listId:t._id}),n=r?.[t.ownerDid]?.displayName??null,d=[{type:"created",label:"List created",timestamp:t.createdAt,actor:t.ownerDid,actorName:n}];return t.vcProof&&d.push({type:"vc_issued",label:"Ownership VC issued",timestamp:t.vcProof.issuanceDate,actor:t.vcProof.issuer}),s?.forEach(c=>{c.inscribedAt&&d.push({type:"anchored",label:"Anchored to Bitcoin",timestamp:c.inscribedAt,actor:c.requestedByDid}),c.confirmedAt&&c.status==="confirmed"&&d.push({type:"confirmed",label:"Bitcoin anchor confirmed",timestamp:c.confirmedAt})}),e.jsxs(v,{title:"Originals Provenance",children:[e.jsx(x,{label:"ðŸ“‹ List DID (Asset)",did:t.assetDid,haptic:a}),e.jsx(x,{label:"ðŸ‘¤ Created By",did:t.ownerDid,displayName:n,haptic:a}),e.jsx(h,{label:"ðŸ“… Created",timestamp:t.createdAt}),t.vcProof&&e.jsx(D,{label:"Ownership Verifiable Credential",issuer:t.vcProof.issuer,issuanceDate:t.vcProof.issuanceDate,haptic:a}),s&&s.length>0&&e.jsxs("div",{className:"py-2",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2",children:["â‚¿ Bitcoin Anchors (",s.length,")"]}),e.jsx("div",{className:"space-y-2",children:s.map(c=>e.jsx(N,{anchor:c},c._id))})]}),d.length>1&&e.jsx(w,{events:d}),e.jsx("div",{className:"py-3",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 leading-relaxed",children:["This list is backed by a decentralized identifier (DID) through"," ",e.jsx("a",{href:"https://originalsprotocol.com",target:"_blank",rel:"noopener noreferrer",className:"text-amber-600 dark:text-amber-400 hover:underline",children:"Originals Protocol"}),", providing cryptographic proof of ownership and authenticity.",s&&s.length>0&&e.jsxs("span",{children:[" ","This list has been anchored to Bitcoin for immutable timestamping."]})]})})]})}function L({item:t}){const{haptic:a}=j(),r=[t.createdByDid];t.checkedByDid&&t.checkedByDid!==t.createdByDid&&r.push(t.checkedByDid),t.vcProofs?.forEach(i=>{r.includes(i.issuer)||r.push(i.issuer),r.includes(i.actorDid)||r.push(i.actorDid)});const s=u(g.users.getUsersByDids,{dids:r}),n=u(g.bitcoinAnchors.getItemAnchors,{itemId:t._id}),d=s?.[t.createdByDid]?.displayName??null,c=t.checkedByDid?s?.[t.checkedByDid]?.displayName??null:null,o=[{type:"created",label:"Item created",timestamp:t.createdAt,actor:t.createdByDid,actorName:d}];return t.vcProofs?.forEach(i=>{const f=s?.[i.actorDid]?.displayName??null;let l="VC issued";i.action==="created"?l="Creation VC issued":i.action==="completed"?l="Completion VC issued":i.action==="modified"&&(l="Modification VC issued"),o.push({type:"vc_issued",label:l,timestamp:i.issuanceDate,actor:i.actorDid,actorName:f})}),t.checked&&t.checkedAt&&t.checkedByDid&&o.push({type:"completed",label:"Item completed",timestamp:t.checkedAt,actor:t.checkedByDid,actorName:c}),n?.forEach(i=>{i.inscribedAt&&o.push({type:"anchored",label:"Anchored to Bitcoin",timestamp:i.inscribedAt,actor:i.requestedByDid}),i.confirmedAt&&i.status==="confirmed"&&o.push({type:"confirmed",label:"Bitcoin anchor confirmed",timestamp:i.confirmedAt})}),e.jsxs(v,{title:"Originals Provenance",children:[e.jsx(x,{label:"ðŸ‘¤ Created By",did:t.createdByDid,displayName:d,haptic:a}),e.jsx(h,{label:"ðŸ“… Created",timestamp:t.createdAt}),t.updatedAt&&t.updatedAt!==t.createdAt&&e.jsx(h,{label:"âœï¸ Last Modified",timestamp:t.updatedAt}),t.checked&&t.checkedByDid&&t.checkedAt&&e.jsxs(e.Fragment,{children:[e.jsx(x,{label:"âœ… Completed By",did:t.checkedByDid,displayName:c,haptic:a}),e.jsx(h,{label:"âœ… Completed",timestamp:t.checkedAt})]}),t.vcProofs&&t.vcProofs.length>0&&e.jsxs("div",{className:"py-2",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2",children:["ðŸ“œ Verifiable Credentials (",t.vcProofs.length,")"]}),e.jsx("div",{className:"space-y-2",children:t.vcProofs.map((i,f)=>{const l=s?.[i.issuer]?.displayName??null;let m="Action VC";return i.action==="created"?m="Creation VC":i.action==="completed"?m="Completion VC":i.action==="modified"&&(m="Modification VC"),e.jsx(D,{label:m,issuer:i.issuer,issuanceDate:i.issuanceDate,displayName:l,haptic:a},f)})})]}),n&&n.length>0&&e.jsxs("div",{className:"py-2",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2",children:["â‚¿ Bitcoin Anchors (",n.length,")"]}),e.jsx("div",{className:"space-y-2",children:n.map(i=>e.jsx(N,{anchor:i},i._id))})]}),o.length>1&&e.jsx(w,{events:o}),e.jsx("div",{className:"py-3",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 leading-relaxed",children:["Item actions are attributed to decentralized identifiers (DIDs) for transparency and accountability.",t.vcProofs&&t.vcProofs.length>0&&e.jsxs("span",{children:[" ","Each action is backed by a Verifiable Credential for cryptographic proof."]}),n&&n.length>0&&e.jsxs("span",{children:[" ","This item has been anchored to Bitcoin for immutable timestamping."]})]})})]})}export{L as I,I as L};
